<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Céu para Antonia</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      background: #000; /* céu totalmente escuro */
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      color: #fff;
    }

    canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
      display: block;
    }

    .overlay {
      position: fixed;
      inset: 0;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      padding: 1.5rem;
    }

    .text-block {
      text-align: center;
      opacity: 0.5; /* texto bem suave */
      animation: fadeIn 2s ease forwards 0.8s;
    }

    .name {
      font-size: clamp(2.8rem, 10vw, 4.4rem);
      letter-spacing: 0.22em;
      text-transform: uppercase;
      margin-bottom: 1.2rem;
      color: rgba(255, 255, 255, 0.75);
      font-weight: 300;
    }

    .message {
      font-size: 1rem;
      line-height: 1.7;
      color: rgba(255, 255, 255, 0.55);
      font-weight: 300;
    }

    @media (max-width: 600px) {
      .message {
        font-size: 0.9rem;
      }
    }

    .line {
      display: block;
      opacity: 1;
      min-height: 1.3em;
    }

    .line.strong {
      margin-top: 0.4rem;
      font-weight: 500;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.65);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 0.5; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <canvas id="sky"></canvas>

  <div class="overlay">
    <div class="text-block">
      <div class="name" id="name"></div>
      <div class="message">
        <span class="line" id="line1"></span>
        <span class="line strong" id="line2"></span>
      </div>
    </div>
  </div>

  <script>
    /* ======================================
       TEXTO CONFIGURÁVEL
    ====================================== */

    const NAME = "Antonia";
    const MESSAGE = [
      "Deixo aqui, de maneira pública, minha maior prova de amor.",
      "Eu te amo."
    ];

    const nameEl = document.getElementById("name");
    const line1El = document.getElementById("line1");
    const line2El = document.getElementById("line2");

    function typeText(el, text, speed, delay = 0, transformFn = (s) => s, cb) {
      setTimeout(() => {
        el.textContent = "";
        const finalText = transformFn(text);
        let i = 0;
        const interval = setInterval(() => {
          el.textContent += finalText[i];
          i++;
          if (i >= finalText.length) {
            clearInterval(interval);
            if (cb) cb();
          }
        }, speed);
      }, delay);
    }

    // ordem de digitação
    typeText(nameEl, NAME, 90, 800, s => s.toUpperCase(), () => {
      typeText(line1El, MESSAGE[0], 35, 400, s => s, () => {
        typeText(line2El, MESSAGE[1], 70, 350, s => s.toUpperCase());
      });
    });

    /* ======================================
       CÉU ESTRELADO
    ====================================== */

    const canvas = document.getElementById("sky");
    const ctx = canvas.getContext("2d");

    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    let IS_MOBILE =
      /Mobi|Android/i.test(navigator.userAgent) || width < 768;

    let STAR_COUNT = 0;
    const stars = [];

    function recalcStarCount() {
      // mais denso pra parecer foto de céu
      const baseDensity = IS_MOBILE ? 4500 : 3200;
      const maxStars = IS_MOBILE ? 550 : 1100;
      STAR_COUNT = Math.min(maxStars, Math.floor((width * height) / baseDensity));
    }

    function random(min, max) {
      return Math.random() * (max - min) + min;
    }

    function createStar() {
      const depth = Math.random();
      const isBright = Math.random() < 0.06; // ~6% mais brilhantes
      return {
        x: Math.random() * width,
        y: Math.random() * height,
        radius: isBright
          ? random(1.4, 2.6) * (0.6 + depth)
          : random(0.3, 1.4) * (0.4 + depth),
        baseAlpha: isBright
          ? random(0.5, 0.9)
          : random(0.15, 0.45),
        twinkleSpeed: random(0.003, 0.018),
        twinkleOffset: Math.random() * Math.PI * 2,
        driftX: random(-0.012, 0.012),
        driftY: random(-0.01, 0.02),
        depth,
        isBright
      };
    }

    function initStars() {
      stars.length = 0;
      recalcStarCount();
      for (let i = 0; i < STAR_COUNT; i++) {
        stars.push(createStar());
      }
    }

    /* ======================================
       ANIMAÇÃO
    ====================================== */

    let lastTime = 0;

    function draw(time) {
      const delta = time - lastTime;
      lastTime = time;

      ctx.clearRect(0, 0, width, height);

      for (const star of stars) {
        star.x += star.driftX * delta * 0.05;
        star.y += star.driftY * delta * 0.05;

        if (star.x < -5) star.x = width + 5;
        if (star.x > width + 5) star.x = -5;
        if (star.y > height + 5) star.y = -5;

        const twinkle =
          star.baseAlpha +
          Math.sin(time * star.twinkleSpeed + star.twinkleOffset) *
            (star.isBright ? 0.25 : 0.22);

        const alpha = Math.max(0, Math.min(1, twinkle));

        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);

        // mesma coloração que você gostou: verde mais escuro
        const g = 70 + Math.floor(star.depth * 40);  // 70–110
        const b = 40 + Math.floor(star.depth * 30);  // 40–70

        ctx.fillStyle = `rgba(0, ${g}, ${b}, ${alpha})`;
        ctx.shadowBlur = star.isBright ? 10 : 6;
        ctx.shadowColor = `rgba(0, ${g + 25}, ${b + 12}, ${alpha * (star.isBright ? 1 : 0.8)})`;
        ctx.fill();
      }

      ctx.shadowBlur = 0;

      requestAnimationFrame(draw);
    }

    initStars();
    requestAnimationFrame(draw);

    window.addEventListener("resize", () => {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
      IS_MOBILE = /Mobi|Android/i.test(navigator.userAgent) || width < 768;
      initStars();
    });
  </script>
</body>
</html>
